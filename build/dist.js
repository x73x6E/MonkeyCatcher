!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/build/",n(n.s=0)}([function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).call(this,{key:"playGround",active:!0}))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,Phaser.Scene),n=t,(o=[{key:"preload",value:function(){this.load.multiatlas("scene","assets/scene.json","assets")}},{key:"create",value:function(){var e=this;this.holes=new Set,this.monkeys=new Set,this.background=this.add.image(0,0,"scene","grass_bg.png"),this.holes.add(this.physics.add.sprite(160,300,"scene","hole/hole_empty.png")),this.holes.add(this.physics.add.sprite(640,300,"scene","hole/hole_empty.png")),this.holes.add(this.physics.add.sprite(400,150,"scene","hole/hole_empty.png")),this.holes.add(this.physics.add.sprite(400,450,"scene","hole/hole_empty.png")),this.monkeyFrameNames=this.anims.generateFrameNames("scene",{start:1,end:3,zeroPad:2,prefix:"monkey/frame",suffix:".png"}),this.anims.create({key:"running",frames:this.monkeyFrameNames,frameRate:16,repeat:-1}),this.isGameOn=!1,this.dialogWindow=this.scene.get("dialogWindow"),this.dialogWindow.events.on("startGame",function(){e.startGame()}),this.arrow=this.input.keyboard.createCursorKeys()}},{key:"update",value:function(e,t){var n=this;if(this.isGameOn){var o=!0,r=!1,i=void 0;try{for(var a,s=this.monkeys[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value,u=Math.atan2(c.y-this.banana.y,c.x-this.banana.x);if(c.setAngle(180*u/Math.PI+90),this.physics.moveToObject(c,this.banana,60),this.physics.overlap(c,this.box))this.monkeys.delete(c),c.destroy(),this.events.emit("addPoint"),0===this.monkeys.size&&this.createMonkey(),this.displaceBox();else{this.physics.overlap(c,this.banana)&&(this.endGame(),this.showDialogWindow("You don't have the banana now","Play again!"));var l=!0,f=!1,h=void 0;try{for(var y,p=function(){var e=y.value;n.physics.overlap(c,e)&&(e.setTexture("scene","hole/hole_down.png"),setTimeout(function(){e.setTexture("scene","hole/hole_empty.png")},1500),n.endGame(),n.showDialogWindow("The monkey fell into the hole","Play again!"))},d=this.holes[Symbol.iterator]();!(l=(y=d.next()).done);l=!0)p()}catch(e){f=!0,h=e}finally{try{l||null==d.return||d.return()}finally{if(f)throw h}}}}}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}this.monkeyFactory.timeToNext-=1.3*t,this.monkeyFactory.timeToNext<0&&this.createMonkey(),this.arrow.right.isDown?this.banana.x+=3:this.arrow.left.isDown&&(this.banana.x-=3),this.arrow.up.isDown?this.banana.y-=3:this.arrow.down.isDown&&(this.banana.y+=3)}}},{key:"startGame",value:function(){this.box=this.physics.add.sprite(-100,-100,"scene","box.png"),this.displaceBox(),this.banana=this.physics.add.sprite(400,300,"scene","banana.png"),this.monkeyFactory={timeToRelease:1e4,timeToNext:1e4},this.createMonkey(),this.events.emit("startGame"),console.log("game started"),this.isGameOn=!0}},{key:"endGame",value:function(){console.log("game ended"),this.isGameOn=!1;var e=!0,t=!1,n=void 0;try{for(var o,r=this.monkeys[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.destroy()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.monkeys.clear(),this.banana.destroy(),this.box.destroy()}},{key:"displaceBox",value:function(){this.box.setRandomPosition(250,250,300,100)}},{key:"createMonkey",value:function(){var e,t=2*Math.PI*Math.random(),n=550*Math.cos(t)+400,o=550*Math.sin(t)+300;n=(n=n>810?810:n)<-10?-10:n,o=(o=o>610?610:o)<-10?-10:o,e=this.physics.add.sprite(n,o,"scene","monkey/frame01.png").setScale(1.3,1.3).anims.play("running"),this.monkeys.add(e),this.monkeyFactory.timeToRelease-=500,this.monkeyFactory.timeToNext=this.monkeyFactory.timeToRelease}},{key:"showDialogWindow",value:function(e,t){var n=this.scene.get("statusBar").score;this.dialogWindow.dialog.getElement("content").setText("".concat(e,"\nYour score was ").concat(n)),this.dialogWindow.dialog.getElement("actions[0]").getElement("text").setText(t),this.dialogWindow.dialog.layout(),this.dialogWindow.scene.bringToTop()}}])&&r(n.prototype,o),c&&r(n,c),t}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=f(this,h(t).call(this,{key:"statusBar",active:!0}))).score=0,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,Phaser.Scene),n=t,(o=[{key:"create",value:function(){var e=this;this.scoreText=this.add.text(660,20,"Score: ".concat(this.score),{font:"24px Verdana",fill:"#ffffff"}),this.playGround=this.scene.get("playGround"),this.playGround.events.on("addPoint",function(){e.score++,e.scoreText.setText("Score: ".concat(e.score))}).on("startGame",function(){e.score=0,e.scoreText.setText("Score: ".concat(e.score))})}}])&&l(n.prototype,o),r&&l(n,r),t}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,g(t).call(this,{key:"dialogWindow",active:!0}))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,Phaser.Scene),n=t,(o=[{key:"preload",value:function(){this.load.scenePlugin({key:"rexuiplugin",url:"https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/plugins/dist/rexuiplugin.min.js",sceneKey:"rexUI"})}},{key:"create",value:function(){this.dialog=this.rexUI.add.dialog({x:400,y:300,background:this.rexUI.add.roundRectangle(0,0,100,100,20,1812314),content:this.add.text(0,0,"Use the banana to catch monkeys",{font:"24px Verdana"}),actions:[this.createButton(this,"Play!")],space:{title:25,content:25,action:15,left:20,right:20,top:20,bottom:20},align:{content:"center",actions:"center"}}).layout().setScale(0),this.dialog.getElement("background").setStrokeStyle(2,3709540);this.tweens.add({targets:this.dialog,scaleX:1,scaleY:1,ease:"Bounce",duration:1e3,repeat:0,yoyo:!1});this.dialog.on("button.click",function(e,t,n){this.scene.sendToBack(),this.events.emit("startGame")},this).on("button.over",function(e,t,n){e.getElement("background").setStrokeStyle(2,16777215)}).on("button.out",function(e,t,n){e.getElement("background").setStrokeStyle()})}},{key:"createButton",value:function(e,t){return e.rexUI.add.label({background:e.rexUI.add.roundRectangle(0,0,100,40,20,15207950),text:e.add.text(0,0,t,{font:"24px Verdana"}),space:{left:30,right:30,top:10,bottom:10}})}}])&&b(n.prototype,o),r&&b(n,r),t}();new Phaser.Game({type:Phaser.AUTO,width:800,height:600,backgroundColor:"#76be45",physics:{default:"arcade"},parent:"game-container",scene:[c,p,w]})}]);
//# sourceMappingURL=dist.js.map